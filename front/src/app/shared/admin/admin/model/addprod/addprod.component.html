<div class="modal-container">
  <div class="modal-card">
    <h2>ðŸ“¦ Ajouter un produit</h2>
    <form [formGroup]="form" (ngSubmit)="ajouter()">

      <!-- Titre -->
      <div class="form-group">
        <label>Titre:</label>
        <input type="text" formControlName="title" placeholder="Titre du produit" />
        <div class="error" *ngIf="form.get('title')?.touched && form.get('title')?.invalid">
          Le titre est requis.
        </div>
      </div>

      <!-- Image -->
      <div class="form-group">
        <label>Image (URL ou tÃ©lÃ©verser)</label>
        <input type="text" formControlName="imageUrl" placeholder="URL de l'image" (input)="previewImage()" />
        <label class="file-upload">
          <input type="file" (change)="uploadImage($event)" hidden />
          <span>ðŸ“¤ Choisir un fichier</span>
        </label>
        <img *ngIf="imagePreview" [src]="imagePreview" class="image-preview" />
        <div class="error" *ngIf="form.get('imageUrl')?.touched && form.get('imageUrl')?.invalid">
          L'image est requise.
        </div>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label>Description:</label>
        <textarea formControlName="description" placeholder="Description"></textarea>
        <div class="error" *ngIf="form.get('description')?.touched && form.get('description')?.invalid">
          La description est requise.
        </div>
      </div>

      <!-- Prix -->
      <div class="form-group">
        <label>Prix (â‚¬):</label>
        <input type="number" formControlName="price" placeholder="0" />
        <div class="error" *ngIf="form.get('price')?.touched && form.get('price')?.invalid">
          Le prix est requis et doit Ãªtre â‰¥ 0.
        </div>
      </div>

      <!-- CatÃ©gorie -->
      <div class="form-group">
        <label>CatÃ©gorie:</label>
        <select formControlName="category">
          <option value="" disabled>Choisir une catÃ©gorie</option>
          <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
        </select>
        <div class="error" *ngIf="form.get('category')?.touched && form.get('category')?.invalid">
          La catÃ©gorie est requise.
        </div>
      </div>

      <!-- Boutons -->
      <div class="buttons">
        <button type="submit" class="btn-add" [disabled]="form.invalid">
          Ajouter
        </button>
        <button type="button" class="btn-cancel" (click)="fermer()">Annuler</button>
      </div>

    </form>
  </div>
</div>
